<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Project Portfolio</title>
        <meta name="description" content="Yordan Ivanov Personal Site">
        <meta name="keywords" content="HTML, CSS, JavaScript">
        <meta name="author" content="Yordan Ivanov">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/styles.css">
        <link rel="icon" href="files/Ψ_012.png">
    </head>

    <body>
      <div class="main_body">
         <p><img class="pc-cloud" src="files/Portfolio.png" width="40%" height="40%" alt="pc-programming"></p>
         <br>
         <h1>Project Portfolio</h1>
         <hr>
         <br>
         <h3>KNN Classifier from Scratch (Python)</h3>
         <pre class="portfolio">
           <code>
            <div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">KNN_Classifier</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Class function that performs K-Nearest Neighbor classification. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    It takes two initiation arguments, number of nearest neighbors </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    and distance metric type. It also takes the data set and the </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    class label provided in the fit method as input data to run </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    the class. For instance, the standard way of implementing the </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    function should include the class followed by fit method and </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    predicting method. See example below:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Example:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; model = KNN_Classifier(k=5, metric_type='manhattan') </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; model.fit(data_set, labels)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; predicted = model.predicting(test_set)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Parameters:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    -----------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    k : number of nearest neighbors to use for classification. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    This argument can have a range of any </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    integer number not greater than the data size.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    metric_type : Is the way of how the distance between data </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    points are measured. The metric type could be either </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    'euclidean' or 'manhattan'.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Methods:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    ___init__(k=3, metric_type='euclidean')</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            Create class initiation with nearest neighbour argument </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            equals 3 and distance metric equals a 'euclidean'.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    fit(X, y)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            The method fits the data to run the KNN classifier. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            See example above.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    euclidean(x, x2)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            It measures the distance between two data points using </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            the euclidean method. For more info:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            &lt;https://es.wikipedia.org/wiki/Distancia_euclidiana&gt;_</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    manhattan(x, x2)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            It measures the distance between two data points using </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            the Manhattan method. It is calculated as the sum of the </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            absolute differences between the two data points.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    k_neighbours(self, x)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            Runs the distance methods to calculate the most common </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            neighbours and return the most common class label for given k.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    predicting(X)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            It takes a test dataset as an argument and run the </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            k_neighbours method and returns array of predicted class labels.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Error raised:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    -------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    If k is not an integer it will raise a TypeError:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    If metric type is neither 'euclidean' nor 'manhattan' it will </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    raise a UnboundLocalError:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    If data and class labels are not the same size it will raise a AssertionError:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    If one of the arguments are not provide it raises a TypeError:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Create class initiation.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">__init__</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">k</span>, <span class="cm-variable">metric_type</span>): </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">k</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">metric_type</span> <span class="cm-operator">=</span> <span class="cm-variable">metric_type</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method to fit the data to KNN classifier.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">fit</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">X</span>, <span class="cm-variable">y</span>): </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">assert</span> <span class="cm-builtin">len</span>(<span class="cm-variable">X</span>) <span class="cm-operator">==</span> <span class="cm-builtin">len</span>(<span class="cm-variable">y</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">X_train</span> <span class="cm-operator">=</span> <span class="cm-variable">X</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">y_train</span> <span class="cm-operator">=</span> <span class="cm-variable">y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that measure euclidean distance between given data points.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">euclidean</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">x</span>, <span class="cm-variable">x2</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">x</span>, <span class="cm-variable-2">self</span>.<span class="cm-property">x2</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span>, <span class="cm-variable">x2</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">squared_length</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">sum</span>((<span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">x</span>) <span class="cm-operator">-</span> <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">x2</span>))<span class="cm-operator">**</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">np</span>.<span class="cm-property">sqrt</span>(<span class="cm-variable">squared_length</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that measure manhattan distance between given data points.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">manhattan</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">x</span>, <span class="cm-variable">x2</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">x</span>, <span class="cm-variable-2">self</span>.<span class="cm-property">x2</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span>, <span class="cm-variable">x2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">abs_length</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">abs</span>(<span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">x</span>) <span class="cm-operator">-</span> <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">x2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">abs_length</span>.<span class="cm-property">sum</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Create a method that runs distance methods and return </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># the most common class label for given k.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">k_neighbours</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">x</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-property">metric_type</span> <span class="cm-operator">==</span> <span class="cm-string">'euclidean'</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">lengths</span> <span class="cm-operator">=</span> [<span class="cm-variable-2">self</span>.<span class="cm-property">euclidean</span>(<span class="cm-variable">x</span>, <span class="cm-variable">x2</span>) <span class="cm-keyword">for</span> <span class="cm-variable">x2</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-property">X_train</span>] </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span> <span class="cm-variable-2">self</span>.<span class="cm-property">metric_type</span> <span class="cm-operator">==</span> <span class="cm-string">'manhattan'</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">lengths</span> <span class="cm-operator">=</span> [<span class="cm-variable-2">self</span>.<span class="cm-property">manhattan</span>(<span class="cm-variable">x</span>, <span class="cm-variable">x2</span>) <span class="cm-keyword">for</span> <span class="cm-variable">x2</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-property">X_train</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">k_index</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">argsort</span>(<span class="cm-variable">lengths</span>)[: <span class="cm-variable-2">self</span>.<span class="cm-property">k</span>] </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">k_nearest_classes</span> <span class="cm-operator">=</span> [<span class="cm-variable-2">self</span>.<span class="cm-property">y_train</span>[<span class="cm-variable">i</span>] <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">k_index</span>] </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">count</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">bincount</span>(<span class="cm-variable">k_nearest_classes</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">most_common_class</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">argmax</span>(<span class="cm-variable">count</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">most_common_class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Create a method that returns array of predicted class labels.    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">predicting</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">X</span>): </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">predicted_labels</span> <span class="cm-operator">=</span> [<span class="cm-variable-2">self</span>.<span class="cm-property">k_neighbours</span>(<span class="cm-variable">x</span>) <span class="cm-keyword">for</span> <span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-variable">X</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">predicted_labels</span>)</span></pre></div>
            </code>
         </pre>
         <br>
         <h3>Blockchain Mining from Scratch (Python)</h3>
         <pre class="portfolio">
           <code>
             <div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Defining a class to mine blockchain transactions.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Zimcoin_Mining</span>(<span class="cm-variable">Zimcoin_Proof_of_Key</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">     </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Class object that mine blocks from the verification process. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    It does not take any initiation arguments except difficulty which </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    is inherent property from the consensus class.It inherit all </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    methods from the Zimcoin Consensus Algorithm class. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    The standard way of implementing the class object should include </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    the class followed by one of the method defined within it. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    See example below:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Example:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; Mining = Zimcoin_Mining() </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; Mining.Run()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Methods:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    ___init__()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        Create class initiation for the class object.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    OP_indexer()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method is intended to append all already mined transaction indexes.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    OP_mined_blocks()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method is intended to print out all mined blocks of the blockchain.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Group_tx()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method creates merkle trees from the transaction blocks and build </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        headers for each block of the blockchain.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Coinbase()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method creates coinbase transaction for each mined block and </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        append it to the transaction blocks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Blockbuilder()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method creates and appends blocks to the blockchain from </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        the merkle trees dataset.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Run()    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method runs all necessary functions to mine</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        all transactions available and print out the updated chain of blocks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    ValueError: Bad decrypt. Incorrect password</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">            </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Create class initiation.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">__init__</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">difficulty</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Difficulty.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">mining_keys</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Mining_Keys.pkl"</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Operation method that joins all already mined indexes.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">OP_indexer</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">omit_list</span> <span class="cm-operator">=</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">trees</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Trees.pkl"</span>, <span class="cm-string">"rb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">trees</span>)):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">omit_list</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">append</span>(<span class="cm-variable">omit_list</span>, <span class="cm-builtin">list</span>(<span class="cm-variable">trees</span>[<span class="cm-variable">i</span>][<span class="cm-string">'index'</span>]))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">omit_list</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">hstack</span>(<span class="cm-variable">omit_list</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">omit_list</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">sort</span>(<span class="cm-variable">omit_list</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-builtin">list</span>(<span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">omit_list</span>, <span class="cm-variable">dtype</span><span class="cm-operator">=</span><span class="cm-builtin">int</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Creating a method that prints out all mined blocks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">OP_mining_blocks</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">chain</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Blockchain.pkl"</span>, <span class="cm-string">"rb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">p</span> <span class="cm-keyword">in</span> <span class="cm-variable">notebook</span>.<span class="cm-property">tqdm</span>(<span class="cm-builtin">range</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">chain</span>)), <span class="cm-variable">desc</span><span class="cm-operator">=</span><span class="cm-string">'Mining Zimcoin'</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-builtin">print</span>(<span class="cm-string">f"\033[1m</span>{<span class="cm-variable">p</span>}<span class="cm-string">\033[0m"</span>, <span class="cm-variable">chain</span>[<span class="cm-variable">p</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-builtin">print</span>(<span class="cm-string">'\033[1m===================================\n\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that creates merkle trees and headers for each block.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">OP_group_tx</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">transactions</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">tree</span> <span class="cm-operator">=</span> {}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">merkle_trees</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Trees.pkl"</span>, <span class="cm-string">"rb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">capitalizations</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Marketcap.pkl"</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">idx</span>, <span class="cm-variable">level_3</span>, <span class="cm-variable">reward</span><span class="cm-operator">=</span> [],[],[]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">count</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Converting transaction blocks to merkle trees. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">for</span> <span class="cm-variable">i</span>, <span class="cm-variable">block</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-variable">transactions</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-property">OP_indexer</span>():</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-keyword">continue</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">count</span> <span class="cm-operator">=</span> <span class="cm-variable">count</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">count</span> <span class="cm-operator">&lt;</span> <span class="cm-number">9</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">block_hash</span> <span class="cm-operator">=</span> <span class="cm-variable">block</span>[<span class="cm-string">'hash'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">block_signature</span> <span class="cm-operator">=</span> <span class="cm-variable">block</span>[<span class="cm-string">'signature'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">amount</span> <span class="cm-operator">=</span> <span class="cm-variable">block</span>[<span class="cm-string">'zimcoins'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">level_3</span>.<span class="cm-property">append</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                   <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">block_hash</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                   <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">block_signature</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                   <span class="cm-builtin">str</span>(<span class="cm-variable">amount</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>)).<span class="cm-property">hex</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">reward</span>.<span class="cm-property">append</span>(<span class="cm-builtin">int</span>(<span class="cm-variable">block</span>[<span class="cm-string">'fee'</span>]))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">idx</span>.<span class="cm-property">append</span>(<span class="cm-builtin">int</span>(<span class="cm-variable">block</span>[<span class="cm-string">'trax_No'</span>]))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-keyword">continue</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">coinbase_hash</span>, <span class="cm-variable">coinbase_signature</span>, <span class="cm-variable">amount</span>, <span class="cm-variable">coinbase_idx</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">Coinbase</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                       <span class="cm-variable-2">self</span>.<span class="cm-property">mining_keys</span>[<span class="cm-number">0</span>][<span class="cm-string">'priv_key'</span>], </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                       <span class="cm-variable-2">self</span>.<span class="cm-property">mining_keys</span>[<span class="cm-number">0</span>][<span class="cm-string">'pub_key'</span>], </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                       <span class="cm-variable">np</span>.<span class="cm-property">sum</span>(<span class="cm-variable">reward</span>))    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">level_3</span>.<span class="cm-property">append</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(<span class="cm-variable">coinbase_hash</span>, <span class="cm-variable">coinbase_signature</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                               <span class="cm-builtin">str</span>(<span class="cm-variable">amount</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>)).<span class="cm-property">hex</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">reward</span>.<span class="cm-property">append</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">idx</span>.<span class="cm-property">append</span>(<span class="cm-variable">coinbase_idx</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-string">'index'</span>] <span class="cm-operator">=</span> <span class="cm-variable">idx</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-keyword">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-number">2</span>] <span class="cm-operator">=</span> <span class="cm-keyword">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-number">3</span>] <span class="cm-operator">=</span> <span class="cm-variable">level_3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">level_2</span> <span class="cm-operator">=</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment"># Cross selection of transactions hashes to form a merkle tree.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">for</span> <span class="cm-variable">l</span>, <span class="cm-variable">m</span>, <span class="cm-variable">n</span> <span class="cm-keyword">in</span> <span class="cm-builtin">zip</span>([<span class="cm-number">0</span>,<span class="cm-number">3</span>,<span class="cm-number">6</span>],[<span class="cm-number">1</span>,<span class="cm-number">4</span>,<span class="cm-number">7</span>],[<span class="cm-number">2</span>,<span class="cm-number">5</span>,<span class="cm-number">8</span>]):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">level_2</span>.<span class="cm-property">append</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">3</span>][<span class="cm-variable">l</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                   <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">3</span>][<span class="cm-variable">m</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                   <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">3</span>][<span class="cm-variable">n</span>])).<span class="cm-property">hex</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-number">2</span>] <span class="cm-operator">=</span> <span class="cm-variable">level_2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">2</span>][<span class="cm-number">0</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                          <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">2</span>][<span class="cm-number">1</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                          <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree</span>[<span class="cm-number">2</span>][<span class="cm-number">2</span>])).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-string">'reward'</span>] <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">sum</span>(<span class="cm-variable">reward</span>) <span class="cm-operator">+</span> <span class="cm-number">1000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree</span>[<span class="cm-string">'balance_No'</span>] <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">mining_keys</span>[<span class="cm-number">0</span>][<span class="cm-string">'pub_key'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">new_idx</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">merkle_trees</span>.<span class="cm-property">keys</span>())[<span class="cm-operator">-</span><span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">merkle_trees</span>[<span class="cm-variable">new_idx</span>] <span class="cm-operator">=</span> <span class="cm-variable">tree</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">merkle_trees</span>, <span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Trees.pkl"</span>, <span class="cm-string">"wb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment"># Computing nonce increment.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">total_cap</span> <span class="cm-operator">=</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">for</span> <span class="cm-variable">ix</span> <span class="cm-keyword">in</span> <span class="cm-variable">tree</span>[<span class="cm-string">'index'</span>]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">for</span> <span class="cm-variable">ic</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">capitalizations</span>)):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">cap_hash</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">capitalizations</span>[<span class="cm-variable">ic</span>].<span class="cm-property">keys</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">cap_hash</span> <span class="cm-operator">==</span> [<span class="cm-variable">transactions</span>[<span class="cm-variable">ix</span>][<span class="cm-string">'hash'</span>]]:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-variable">total_cap</span>.<span class="cm-property">append</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                            <span class="cm-variable">capitalizations</span>[<span class="cm-variable">ic</span>][<span class="cm-string">f"</span>{<span class="cm-builtin">str</span>.<span class="cm-property">join</span>(<span class="cm-string">''</span>, <span class="cm-variable">cap_hash</span>)}<span class="cm-string">"</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                        <span class="cm-keyword">continue</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">except</span> <span class="cm-variable">IndexError</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-builtin">print</span>(<span class="cm-string">'\n\033[1m============== Zimcoin Mining ==============\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable-2">self</span>.<span class="cm-property">Blockbuilder</span>(<span class="cm-variable">tree</span>, <span class="cm-variable">np</span>.<span class="cm-property">sum</span>(<span class="cm-variable">total_cap</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Creating coinbase transaction for the mined blocks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Coinbase</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">private_key_miner</span>, <span class="cm-variable">public_key_miner</span>, <span class="cm-variable">reward</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span> <span class="cm-operator">=</span> {}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">transactions</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Transactions.pkl"</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">trax_No</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>][<span class="cm-string">'trax_No'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'trax_No'</span>] <span class="cm-operator">=</span> <span class="cm-keyword">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'hash'</span>] <span class="cm-operator">=</span> <span class="cm-keyword">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'previous_hash'</span>] <span class="cm-operator">=</span> <span class="cm-string">"Coinbase"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'timestamp'</span>] <span class="cm-operator">=</span> <span class="cm-variable">datetime</span>.<span class="cm-property">now</span>().<span class="cm-property">strftime</span>(<span class="cm-string">"%Y-%m-%d %H:%M:%S:%f"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'balance_No'</span>] <span class="cm-operator">=</span> <span class="cm-variable">public_key_miner</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'zimcoins'</span>] <span class="cm-operator">=</span> <span class="cm-variable">reward</span> <span class="cm-operator">+</span> <span class="cm-number">1000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'fee'</span>] <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">nonce</span> <span class="cm-operator">=</span> <span class="cm-builtin">int</span>.<span class="cm-property">from_bytes</span>(<span class="cm-variable">os</span>.<span class="cm-property">urandom</span>(<span class="cm-number">8</span>), <span class="cm-variable">byteorder</span><span class="cm-operator">=</span><span class="cm-string">'little'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'nonce'</span>] <span class="cm-operator">=</span> <span class="cm-variable">nonce</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'state'</span>] <span class="cm-operator">=</span> <span class="cm-string">'Unverified'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Data hashing, data signing of the transaction.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA1_hashing</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">private_key_miner</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                 <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">public_key_miner</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                 <span class="cm-builtin">str</span>(<span class="cm-variable">nonce</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                 <span class="cm-builtin">str</span>(<span class="cm-variable">cb</span>[<span class="cm-string">'timestamp'</span>]).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">data_miner</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(<span class="cm-variable">data</span>, <span class="cm-builtin">str</span>(<span class="cm-variable">nonce</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                         <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">public_key_miner</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'hash'</span>] <span class="cm-operator">=</span> <span class="cm-variable">data_miner</span>.<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">data_signing</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">public_key_miner</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                           <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">public_key_miner</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                           <span class="cm-builtin">str</span>(<span class="cm-variable">reward</span> <span class="cm-operator">+</span> <span class="cm-number">1000</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Verification of signature and private key. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Invalid private keys are dismissed.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">signed</span> <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">Sign_transaction</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">load_der_private_key</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">private_key_miner</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                 <span class="cm-variable">password</span><span class="cm-operator">=</span><span class="cm-string">b'zimcoin'</span>), <span class="cm-variable">data_signing</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">load_der_public_key</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                            <span class="cm-variable">public_key_miner</span>)).<span class="cm-property">verify</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                            <span class="cm-variable">signed</span>, <span class="cm-variable">data_signing</span>, <span class="cm-variable">ec</span>.<span class="cm-property">ECDSA</span>(<span class="cm-variable">hashes</span>.<span class="cm-property">SHA256</span>()))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">except</span> <span class="cm-variable">InvalidSignature</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-builtin">print</span>(<span class="cm-string">"\033[1mInvalid private key. Mining error!\033[0m"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Storing the transaction on the blockchain.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">trax_No</span> <span class="cm-operator">=</span> <span class="cm-variable">trax_No</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'trax_No'</span>] <span class="cm-operator">=</span> <span class="cm-variable">trax_No</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'signature'</span>] <span class="cm-operator">=</span> <span class="cm-variable">signed</span>.<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">cb</span>[<span class="cm-string">'status'</span>] <span class="cm-operator">=</span> <span class="cm-string">'Mined'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">transactions</span>.<span class="cm-property">append</span>(<span class="cm-variable">cb</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">Update</span>(<span class="cm-variable">transactions</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">data_miner</span>, <span class="cm-variable">signed</span> , <span class="cm-variable">cb</span>[<span class="cm-string">'zimcoins'</span>], <span class="cm-variable">cb</span>[<span class="cm-string">'trax_No'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining method that builds blocks from merkle trees.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Blockbuilder</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">mined_tree</span>, <span class="cm-variable">nonce_increment</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span> <span class="cm-operator">=</span> {}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">blockchian</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Blockchain.pkl"</span>, <span class="cm-string">"rb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">merkle_trees</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Trees.pkl"</span>, <span class="cm-string">"rb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Appending block hash.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">last_idx</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">merkle_trees</span>.<span class="cm-property">keys</span>())[<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'hash'</span>] <span class="cm-operator">=</span> <span class="cm-variable">mined_tree</span>[<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'previous_hash'</span>] <span class="cm-operator">=</span> <span class="cm-variable">merkle_trees</span>[<span class="cm-variable">last_idx</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>][<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'timestamp'</span>] <span class="cm-operator">=</span> <span class="cm-variable">datetime</span>.<span class="cm-property">now</span>().<span class="cm-property">strftime</span>(<span class="cm-string">"%Y-%m-%d %H:%M:%S:%f"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Appending nonce.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">last_block_idx</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">blockchian</span>.<span class="cm-property">keys</span>())[<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-builtin">int</span>(<span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Blockchain.pkl"</span>, <span class="cm-string">"rb"</span>))[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                              <span class="cm-variable">last_block_idx</span>][<span class="cm-string">'nonce'</span>].<span class="cm-property">strip</span>(<span class="cm-string">'ZIM'</span>)[:<span class="cm-operator">-</span><span class="cm-number">10</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">n</span> <span class="cm-operator">+</span> <span class="cm-variable">nonce_increment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">nonce</span> <span class="cm-operator">=</span> <span class="cm-string">''</span>.<span class="cm-property">join</span>([<span class="cm-string">'ZIM'</span>, <span class="cm-builtin">str</span>(<span class="cm-variable">n</span>), <span class="cm-variable">os</span>.<span class="cm-property">urandom</span>(<span class="cm-number">5</span>).<span class="cm-property">hex</span>()])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'nonce'</span>] <span class="cm-operator">=</span> <span class="cm-variable">nonce</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Appending Proof of Key.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">priv_key</span>, <span class="cm-variable">pub_key</span>, <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">OP_find_key</span>(<span class="cm-variable">block</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'signature'</span>] <span class="cm-operator">=</span> <span class="cm-variable-2">self</span>.<span class="cm-property">OP_signature</span>(<span class="cm-variable">priv_key</span>, <span class="cm-builtin">str</span>(<span class="cm-variable">nonce</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block</span>[<span class="cm-string">'proof_of_key'</span>] <span class="cm-operator">=</span> <span class="cm-variable">pub_key</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Adding the block to the blockchain and printing out the result. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">blockchian</span>[<span class="cm-variable">last_block_idx</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">block</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">blockchian</span>, <span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Blockchain.pkl"</span>, <span class="cm-string">"wb"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Creating a method that runs all class together.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Run</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">transactions</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">"./Data/Zimcoin_Transactions.pkl"</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-builtin">len</span>(<span class="cm-variable">transactions</span>) <span class="cm-operator">-</span> <span class="cm-builtin">len</span>(<span class="cm-variable-2">self</span>.<span class="cm-property">OP_indexer</span>()) <span class="cm-operator">&lt;</span> <span class="cm-number">8</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-builtin">print</span>(<span class="cm-string">'\n\033[1m============== Zimcoin Mining ==============\033[0m'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                  <span class="cm-string">'\n\n          There are not enough transaction to build a block!'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                  <span class="cm-string">'\n\n\033[1m=========================================\n\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-property">OP_group_tx</span>(<span class="cm-variable">transactions</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">Zimcoin_Verification</span>().<span class="cm-property">Run</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">return</span> <span class="cm-variable-2">self</span>.<span class="cm-property">OP_mining_blocks</span>()</span></pre></div>
           </code>
         </pre>
         <br>
         <h3>Mempool Modifications from Scratch (Python)</h3>
         <pre class="portfolio">
           <code>
            <div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Zimcoin_Mempool</span>(<span class="cm-variable">Zimcoin_Mining</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-string">"""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Blockchain Mempool for Humans:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Class object where unconfirmed transactions are stored </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    before they are included in a blockchain. The class does </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    not take any initiation arguments. It inherit all methods </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    from the Zimcoin Mining class. The standard way of implementing </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    the class object should include the class followed by one </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    of the method defined within it. See example below:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Example:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; Mempool = Zimcoin_Mempool()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    &gt;&gt;&gt; Mempool.Run()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Methods:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    --------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    ___init__()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        Create class initiation for the class object.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    POK_verifier()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method is intended to verify the proof of key consensus mechanism.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Tree_verifier()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method is checks all merkle trees validity.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Fork_verifier()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method verifies the bolckchain for forks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Block_flow()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method adjusts the mining difficulty and the speed of </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        creating new blocks on the chain. </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    Run()    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">        The method runs all necessary functions to maintain the mempool in check.    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Create class initiation.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">__init__</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">difficulty</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Difficulty.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that verifies Proof of Key consensus algorithm.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">POK_verifier</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">blockchain</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">trees</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Trees.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Verification mining proof of key. Invalid proof of keys are dismissed.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-builtin">print</span>(<span class="cm-string">'\n\033[1m================ Zimcoin Mempool ================\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">notebook</span>.<span class="cm-property">tqdm</span>(<span class="cm-variable">blockchain</span>, <span class="cm-variable">desc</span><span class="cm-operator">=</span><span class="cm-string">'Proof of Key Verification'</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">nonce</span> <span class="cm-operator">=</span> <span class="cm-variable">blockchain</span>[<span class="cm-variable">i</span>][<span class="cm-string">'nonce'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">pok</span> <span class="cm-operator">=</span> <span class="cm-variable">blockchain</span>[<span class="cm-variable">i</span>][<span class="cm-string">'proof_of_key'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">sig</span> <span class="cm-operator">=</span> <span class="cm-variable">blockchain</span>[<span class="cm-variable">i</span>][<span class="cm-string">'signature'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">load_der_public_key</span>(<span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">pok</span>)).<span class="cm-property">verify</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                              <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">sig</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                              <span class="cm-builtin">str</span>(<span class="cm-variable">nonce</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                              <span class="cm-variable">ec</span>.<span class="cm-property">ECDSA</span>(<span class="cm-variable">hashes</span>.<span class="cm-property">SHA256</span>()))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">except</span> <span class="cm-variable">InvalidSignature</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">blockchain</span>.<span class="cm-property">pop</span>(<span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">trees</span>.<span class="cm-property">pop</span>(<span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">blockchain</span>, <span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'wb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">trees</span>, <span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Trees.pkl'</span>, <span class="cm-string">'wb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-builtin">print</span>(<span class="cm-string">f'Unvalid Proof of Key at index </span>{<span class="cm-variable">i</span>}<span class="cm-string">:'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                      <span class="cm-string">'\033[1mBlock No {i} was droped from the blockchain.\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">     </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-null cm-error">    </span><span class="cm-comment"># Defining a method that verifies all merkle trees.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Tree_verifier</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">trees</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Trees.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">transactions</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Transactions.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">blockchain</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Splitting tree to branches and leaves.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">t</span> <span class="cm-keyword">in</span> <span class="cm-variable">notebook</span>.<span class="cm-property">tqdm</span>(<span class="cm-builtin">range</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">trees</span>)), <span class="cm-variable">desc</span><span class="cm-operator">=</span><span class="cm-string">'Merkle Tree Verification'</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">branch</span> <span class="cm-operator">=</span> <span class="cm-variable">np</span>.<span class="cm-property">random</span>.<span class="cm-property">randint</span>(<span class="cm-number">1</span>,<span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">leaf</span> <span class="cm-operator">=</span> <span class="cm-variable">branch</span><span class="cm-operator">*</span><span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree_h1</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">3</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">3</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree_h2</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">3</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">2</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tree_h3</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">3</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">ix1</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-string">'index'</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">3</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">ix2</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-string">'index'</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">2</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">ix3</span> <span class="cm-operator">=</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-string">'index'</span>][<span class="cm-variable">leaf</span><span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">           </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-null cm-error">            </span><span class="cm-comment"># Taking all details from the transactions pool for leaf 1.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_hash1</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix1</span>][<span class="cm-string">'hash'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_sig1</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix1</span>][<span class="cm-string">'signature'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_amount1</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix1</span>][<span class="cm-string">'zimcoins'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">             <span class="cm-comment"># Taking all details from the transactions pool for leaf 2.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_hash2</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix2</span>][<span class="cm-string">'hash'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_sig2</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix2</span>][<span class="cm-string">'signature'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_amount2</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix2</span>][<span class="cm-string">'zimcoins'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment"># Taking all details from the transactions pool for leaf 3.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_hash3</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix3</span>][<span class="cm-string">'hash'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_sig3</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix3</span>][<span class="cm-string">'signature'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">tx_amount3</span> <span class="cm-operator">=</span> <span class="cm-variable">transactions</span>[<span class="cm-variable">ix3</span>][<span class="cm-string">'zimcoins'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment"># Verifieng merkle tree.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">try</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">assert</span> <span class="cm-variable">tree_h1</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_hash1</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_sig1</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">str</span>(<span class="cm-variable">tx_amount1</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>)).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">assert</span> <span class="cm-variable">tree_h2</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_hash2</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_sig2</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">str</span>(<span class="cm-variable">tx_amount2</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>)).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">assert</span> <span class="cm-variable">tree_h3</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_hash3</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tx_sig3</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                  <span class="cm-builtin">str</span>(<span class="cm-variable">tx_amount3</span>).<span class="cm-property">encode</span>(<span class="cm-string">'utf-8'</span>)).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">assert</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">2</span>][<span class="cm-variable">branch</span><span class="cm-operator">-</span><span class="cm-number">1</span>] <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree_h1</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree_h2</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                                <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">tree_h3</span>)).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">assert</span> <span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">1</span>] <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-property">SHA256_hashing</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                      <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">2</span>][<span class="cm-number">0</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                      <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">2</span>][<span class="cm-number">1</span>]), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                      <span class="cm-builtin">bytes</span>.<span class="cm-property">fromhex</span>(<span class="cm-variable">trees</span>[<span class="cm-variable">t</span>][<span class="cm-number">2</span>][<span class="cm-number">2</span>])).<span class="cm-property">hex</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-null cm-error">            </span><span class="cm-keyword">except</span> <span class="cm-variable">AssertionError</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">trees</span>.<span class="cm-property">pop</span>(<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">blockchain</span>.<span class="cm-property">pop</span>(<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">trees</span>, <span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Trees.pkl'</span>, <span class="cm-string">'wb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">blockchain</span>, <span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'wb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-builtin">print</span>(<span class="cm-string">f'Unvalid merkle tree at index </span>{<span class="cm-variable">t</span>}<span class="cm-string">:'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                      <span class="cm-string">'\033[1mBlock No {t} was droped from the blockchain.\033[0m'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that check for forks.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Fork_verifier</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">bch</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment"># Checking all the blockchian for collusions.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block_prev_hashes</span>, <span class="cm-variable">temp_dict</span>, <span class="cm-variable">block_collusions</span> <span class="cm-operator">=</span> [],{},{}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">bch</span>)):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">block_prev_hashes</span>.<span class="cm-property">append</span>(<span class="cm-variable">bch</span>[<span class="cm-variable">i</span>][<span class="cm-string">'previous_hash'</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">j</span>, <span class="cm-variable">ph</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-variable">block_prev_hashes</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">block_prev_hashes</span>.<span class="cm-property">count</span>(<span class="cm-variable">ph</span>) <span class="cm-operator">&gt;</span> <span class="cm-number">1</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">temp_dict</span>.<span class="cm-property">update</span>({<span class="cm-variable">j</span>:<span class="cm-variable">ph</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">fork</span> <span class="cm-keyword">in</span> <span class="cm-variable">temp_dict</span>.<span class="cm-property">items</span>():</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">fork</span>[<span class="cm-number">1</span>] <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">block_collusions</span>.<span class="cm-property">keys</span>():</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">block_collusions</span>[<span class="cm-variable">fork</span>[<span class="cm-number">1</span>]] <span class="cm-operator">=</span> []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">block_collusions</span>[<span class="cm-variable">fork</span>[<span class="cm-number">1</span>]].<span class="cm-property">append</span>(<span class="cm-variable">fork</span>[<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">return</span> <span class="cm-variable">block_collusions</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Defining a method that makes difficulty adjustments.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Block_flow</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">difficulty</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Difficulty.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">bch</span> <span class="cm-operator">=</span> <span class="cm-variable">pickle</span>.<span class="cm-property">load</span>(<span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Blockchain.pkl'</span>, <span class="cm-string">'rb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">block_delta</span> <span class="cm-operator">=</span> <span class="cm-variable">datetime</span>.<span class="cm-property">strptime</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                         <span class="cm-variable">bch</span>[<span class="cm-builtin">len</span>(<span class="cm-variable">bch</span>)<span class="cm-operator">-</span><span class="cm-number">1</span>][<span class="cm-string">'timestamp'</span>], </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                         <span class="cm-string">"%Y-%m-%d %H:%M:%S:%f"</span>) <span class="cm-operator">-</span> <span class="cm-variable">datetime</span>.<span class="cm-property">strptime</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                         <span class="cm-variable">bch</span>[<span class="cm-builtin">len</span>(<span class="cm-variable">bch</span>)<span class="cm-operator">-</span><span class="cm-number">2</span>][<span class="cm-string">'timestamp'</span>], <span class="cm-string">"%Y-%m-%d %H:%M:%S:%f"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">delta_high</span> <span class="cm-operator">=</span> <span class="cm-variable">timedelta</span>(<span class="cm-variable">seconds</span><span class="cm-operator">=</span><span class="cm-number">600000</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">delta_low</span> <span class="cm-operator">=</span> <span class="cm-variable">timedelta</span>(<span class="cm-variable">seconds</span><span class="cm-operator">=</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable">delta_low</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">block_delta</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">delta_high</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">pass</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">elif</span> <span class="cm-variable">delta_low</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">block_delta</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">difficulty</span> <span class="cm-operator">=</span> <span class="cm-variable">difficulty</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">difficulty</span> <span class="cm-operator">=</span> <span class="cm-variable">difficulty</span> <span class="cm-operator">-</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable">difficulty</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            [<span class="cm-variable">d</span> <span class="cm-keyword">for</span> <span class="cm-variable">d</span> <span class="cm-keyword">in</span> <span class="cm-variable">notebook</span>.<span class="cm-property">tqdm</span>(<span class="cm-builtin">range</span>(<span class="cm-variable">difficulty</span><span class="cm-operator">*</span><span class="cm-number">10</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">                                      <span class="cm-variable">desc</span><span class="cm-operator">=</span><span class="cm-string">'Mining Difficulty Adjustment'</span>, <span class="cm-variable">total</span><span class="cm-operator">=</span><span class="cm-number">100</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">return</span> <span class="cm-variable">pickle</span>.<span class="cm-property">dump</span>(<span class="cm-variable">difficulty</span>, <span class="cm-builtin">open</span>(<span class="cm-string">'./Data/Zimcoin_Difficulty.pkl'</span>, <span class="cm-string">'wb'</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>: </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">difficulty</span><span class="cm-operator">=</span><span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment"># Creating a method that runs all class together.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">Run</span>(<span class="cm-variable-2">self</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">POK_verifier</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">Tree_verifier</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-property">Block_flow</span>()</span></pre></div>
           </code>
         </pre>
         <br>
         <hr>
      </div>
      <div class="bottam">
            <p>
               <a href="index.html">Home</a>&nbsp &nbsp
               <a href="qualifications.html">Qualifications</a>&nbsp &nbsp
               <a href="work-experience.html">Work Experience</a>&nbsp &nbsp
               <a href="portfolio.html">Portfolio</a>&nbsp &nbsp
               <a href="contact-me.html">Contact me</a>
            </p>
        </div>
    </body>
</html>